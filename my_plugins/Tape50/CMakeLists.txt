set(
  plugin_sources
  include/buffer.h
  include/constants.h
  include/controller.h
  include/id.h
  include/parameter.h
  include/processor.h
  include/version.h
  source/buffer.cpp
  source/controller.cpp
  source/factory.cpp
  source/parameter.cpp
  source/processor.cpp
)
set(target Tape50)
smtg_add_vst3plugin(${target} ${plugin_sources})
set_target_properties(${target} PROPERTIES ${SDK_IDE_MYPLUGINS_FOLDER})
target_include_directories(${target} PUBLIC ${VSTGUI_ROOT}/vstgui4)
target_link_libraries(${target} PRIVATE base sdk vstgui_support)

# generated by knob.html
smtg_add_vst3_resource(${target} "image/knob_1x.png")
smtg_add_vst3_resource(${target} "image/knob_2x.png")
smtg_add_vst3_resource(${target} "image/knob_3x.png")

# generated by slider_background.html
smtg_add_vst3_resource(${target} "image/slider_background_1x.png")
smtg_add_vst3_resource(${target} "image/slider_background_2x.png")
smtg_add_vst3_resource(${target} "image/slider_background_3x.png")

# generated by slider_handle.html
smtg_add_vst3_resource(${target} "image/slider_handle_1x.png")
smtg_add_vst3_resource(${target} "image/slider_handle_2x.png")
smtg_add_vst3_resource(${target} "image/slider_handle_3x.png")

# VST3 snapshot
smtg_add_vst3_snapshot(${target} "image/48e20cd2c66a4bb7a41070542c21bc00_snapshot_1x.png")

# main view
smtg_add_vst3_resource(${target} "resource/main.uidesc")

if(SMTG_MAC)
  smtg_set_bundle(${target} INFOPLIST "${CMAKE_CURRENT_LIST_DIR}/resource/Info.plist" PREPROCESS)
elseif(SMTG_WIN)
  target_sources(${target} PRIVATE resource/plugin.rc)
endif()
